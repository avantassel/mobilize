<div class="page-header">
  <h1>Request Updates <small>Get updates on relief and recovery efforts</small></h1>
</div>

<form name="requestForm" novalidate ng-submit="addContactRequest()">
  <!--  Alerts -->
  <div class="alert alert-warning alert-dismissible" role="alert" ng-if="error">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <strong>Warning!</strong> {{error}}.
  </div>
  <div class="alert alert-info alert-dismissible" role="alert" ng-if="progress">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    {{progress}}.
  </div>

  <!--  Contact Form -->
  <div class="form-group"
      ng-class="{'has-error': requestForm.content.$invalid
        && requestForm.content.$dirty}">

    <div class="row">
      <div class="col-sm-4">
        <div class="input">
          <img id="photo-output" src="holder.js/200x200?theme=sky&fg=ffffff&text=Click%20to%20add%20your%20photo" class="img-circle" style="width: 140px; height: 140px;" onclick="$('#photo').click()">
          <input type="file" id="photo" name="photo" ng-model="newContactRequest.photo" style="font-size: 50px; width: 120px; opacity: 0; filter:alpha(opacity: 0);  position: relative; top: -40px;; left: -20px">
        </div>
      </div>
      <div class="col-sm-8">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="jumbotron">
              <p>
                Give us your email and mobile number to receive updates.
                <br>You can also help RedCross shelter staffing by letting us know your coming.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div class="input-layout">
			<input type="text" required="" class="validate-empty" name="name" id="name" value="" ng-model="newContactRequest.name">
		    <span class="highlight"></span>
		    <span class="bar"></span>
		    <label>Your Name</label>
			<div class="alert alert-error alert-name" style="display: none;">
				Oops! Name is required.
			</div>
		</div>

    <div class="input-layout">
			<input type="email" required="" class="validate-empty" name="email" id="email" value="" ng-model="newContactRequest.email">
		    <span class="highlight"></span>
		    <span class="bar"></span>
		    <label>Your Email</label>
			<div class="alert alert-error alert-name" style="display: none;">
				Oops! Email is required.
			</div>
		</div>

    <div class="input-layout">
			<input type="text" required="" class="validate-empty" name="mobile" id="mobile" value="" ng-model="newContactRequest.mobile">
		    <span class="highlight"></span>
		    <span class="bar"></span>
		    <label>Your Mobile Number</label>
			<div class="alert alert-error alert-name" style="display: none;">
				Oops! Phone is required.
			</div>
		</div>

    <div class="input-layout input-group">
			<input type="text" required="" class="validate-empty" name="comments" id="comments" value="" ng-model="newContactRequest.comments">
      <div class="input-group-btn" ng-class="recognizing?'btn-danger':''">
          <button type="button" class="btn" ng-class="recognizing?'btn-danger':'btn-default'">
            <i class="fa fa-microphone fa-3x" ng-click="listen()"></i>
          </button>
      </div>
        <span class="highlight"></span>
		    <span class="bar"></span>
		    <label>Your is your situation?</label>
			<div class="alert alert-error alert-name" style="display: none;">
				What can we help you with?
			</div>
		</div>
    <br>

    <!-- Shelters  -->
    <label>Will you be visiting a RedCross shelter?</label>
    <span ng-if="!shelters.length"><br><i class="fa fa-circle-o-notch fa-spin fa-lg"></i> Loading Shelters...</span>

    <div class="list-group">
      <a href="#" class="list-group-item" ng-class="newContactRequest.shelter['_id']==shelter['_id']?'active':''" ng-repeat="shelter in shelters" ng-click="chooseShelter(shelter)">
        <h4 class="list-group-item-heading">{{shelter.name}}</h4>
        <p class="list-group-item-text">
          <address>
            {{shelter.addr1}}<br>
            {{shelter.city}} {{shelter.state}} {{shelter.zip}}<br>
            <span ng-if="shelter.distance">{{shelter.distance.mi}} mi</span>
          </address>
          Updated: {{shelter.lastUpdated | ago}}
        </p>
        <div class="btn-group-vertical shelter-status" role="group">
          <button class="btn" type="button">
            Capacity <span class="badge">{{shelter.capacity}}</span>
          </button>
          <button class="btn" ng-class="getPopulationClass(shelter)" type="button">
            Population <span class="badge">{{shelter.population}}</span>
          </button>
        </div>
      </a>
    </div>
    <br>

    <!-- ETA if shelter is selected  -->
    <div class="input-layout has-feedback" ng-if="newContactRequest.shelter['_id']">
			<input type="text" required="" class="validate-empty" name="eta" id="eta" value="" ng-model="newContactRequest.eta">
		    <span class="highlight"></span>
		    <span class="bar"></span>
		    <label>Your ETA?</label>
        <span id="helpBlock" class="help-block">
          <span ng-repeat="eta in etas">
            <a href="#" ng-click="fillETA(eta)">{{eta}}</a>&nbsp;
          </span>
        </span>
      <div class="alert alert-error alert-name" style="display: none;">
				Oops! ETA is required.
			</div>
		</div>

  </div>
  <button class="btn btn-primary" ng-disabled="requestForm.$invalid">Save</button>
</form>
